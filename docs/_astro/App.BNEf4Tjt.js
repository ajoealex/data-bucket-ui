import{r as n}from"./index.WFquGv8Z.js";var J={exports:{}},F={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z;function Z(){if(z)return F;z=1;var i=Symbol.for("react.transitional.element"),l=Symbol.for("react.fragment");function d(h,p,t){var N=null;if(t!==void 0&&(N=""+t),p.key!==void 0&&(N=""+p.key),"key"in p){t={};for(var a in p)a!=="key"&&(t[a]=p[a])}else t=p;return p=t.ref,{$$typeof:i,type:h,key:N,ref:p!==void 0?p:null,props:t}}return F.Fragment=l,F.jsx=d,F.jsxs=d,F}var V;function H(){return V||(V=1,J.exports=Z()),J.exports}var e=H();const U={communityServerUrl:"https://databucket.automationhub.in",maxBucketsPerUser:5};function G({onConnect:i}){const[l,d]=n.useState("http://127.0.0.1:7895"),[h,p]=n.useState(""),[t,N]=n.useState(""),[a,A]=n.useState(!1),[w,_]=n.useState(!1),[$,f]=n.useState(""),[j,R]=n.useState(null),[M,S]=n.useState(!1),m=U.communityServerUrl.trim()!=="",v=async g=>{g.preventDefault(),f(""),R(null),S(!1),A(!0);try{const s=await fetch(`${l}/api/v1/ping`,{method:"GET"});if(!s.ok)throw new Error("Server is not reachable. Please check the URL.");if((await s.json()).status!=="ok")throw new Error("Server is not responding correctly.");const b={"Content-Type":"application/json"};(h||t)&&(b.Authorization="Basic "+btoa(`${h}:${t}`));const C=await(await fetch(`${l}/api/v1/auth`,{method:"POST",headers:b})).json();if(C.authenticated)localStorage.setItem("dataBucketUrl",l),localStorage.setItem("dataBucketUsername",h),localStorage.setItem("dataBucketPassword",t),localStorage.setItem("isCommunityServer","false"),i({url:l,username:h,password:t});else if(C.blacklisted)S(!0),f("You have been blacklisted due to too many failed attempts. Please try again later.");else if(C.error){const E=C.error;C.remaining_attempts!==void 0?(R(C.remaining_attempts),f(`${E} (${C.remaining_attempts} attempts remaining)`)):f(E)}else f("Authentication failed. Please check your credentials.")}catch(s){s.message?f(s.message):f("Failed to connect to Data Bucket API. Please check the URL and try again.")}finally{A(!1)}},O=async()=>{f(""),R(null),S(!1),_(!0);try{const g=await fetch(`${U.communityServerUrl}/api/v1/ping`,{method:"GET"});if(!g.ok)throw new Error("Community Server is not reachable. Please try again later.");if((await g.json()).status!=="ok")throw new Error("Community Server is not responding correctly.");localStorage.setItem("dataBucketUrl",U.communityServerUrl),localStorage.setItem("dataBucketUsername",""),localStorage.setItem("dataBucketPassword",""),localStorage.setItem("isCommunityServer","true"),i({url:U.communityServerUrl,username:"",password:""})}catch(g){g.message?f(g.message):f("Failed to connect to Community Server. Please try again later.")}finally{_(!1)}};return e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-600 to-purple-900 p-5",children:[e.jsxs("div",{className:`bg-white rounded-3xl shadow-2xl p-6 md:p-12 w-full animate-slideUp ${m?"max-w-5xl":"max-w-md"}`,children:[e.jsxs("div",{className:"text-center mb-6 md:mb-10",children:[e.jsx("div",{className:"inline-block text-purple-600 mb-4 animate-float",children:e.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 64 64",fill:"none",className:"mx-auto",children:[e.jsx("rect",{x:"8",y:"16",width:"48",height:"40",rx:"4",stroke:"currentColor",strokeWidth:"3",fill:"none"}),e.jsx("path",{d:"M16 28 L48 28",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round"}),e.jsx("circle",{cx:"32",cy:"40",r:"6",fill:"currentColor"}),e.jsx("path",{d:"M8 24 L56 24",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round"})]})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Data Bucket"}),e.jsx("p",{className:"text-gray-600",children:"Connect to your Data Bucket API"})]}),e.jsxs("div",{className:`grid ${m?"grid-cols-1 md:grid-cols-2 gap-6 md:gap-8":"grid-cols-1"}`,children:[e.jsxs("div",{className:m?"md:border-r border-gray-200 md:pr-8 pb-6 md:pb-0 border-b md:border-b-0":"",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Connect to Your Server"}),e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"url",className:"block text-sm font-semibold text-gray-700 mb-2",children:"API URL"}),e.jsx("input",{id:"url",type:"text",value:l,onChange:g=>d(g.target.value),placeholder:"http://127.0.0.1:7895",required:!0,className:"w-full px-4 py-3.5 border-2 border-gray-200 rounded-xl text-base transition-all outline-none bg-gray-50 focus:border-purple-600 focus:bg-white focus:ring-4 focus:ring-purple-100 placeholder-gray-400"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Username"}),e.jsx("input",{id:"username",type:"text",value:h,onChange:g=>p(g.target.value),placeholder:"Enter username",className:"w-full px-4 py-3.5 border-2 border-gray-200 rounded-xl text-base transition-all outline-none bg-gray-50 focus:border-purple-600 focus:bg-white focus:ring-4 focus:ring-purple-100 placeholder-gray-400"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Password"}),e.jsx("input",{id:"password",type:"password",value:t,onChange:g=>N(g.target.value),placeholder:"Enter password",className:"w-full px-4 py-3.5 border-2 border-gray-200 rounded-xl text-base transition-all outline-none bg-gray-50 focus:border-purple-600 focus:bg-white focus:ring-4 focus:ring-purple-100 placeholder-gray-400"})]}),$&&e.jsx("div",{className:`p-4 rounded-lg text-sm border-l-4 ${M?"bg-red-50 text-red-800 border-red-800":j!==null&&j<=3?"bg-orange-50 text-orange-800 border-orange-800":"bg-red-50 text-red-700 border-red-700"}`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-5 h-5 shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold",children:M?"Account Blacklisted":"Authentication Failed"}),e.jsx("p",{className:"mt-1",children:$}),j!==null&&j<=3&&!M&&e.jsxs("p",{className:"mt-2 text-xs font-semibold",children:["⚠️ Warning: Only ",j," attempt",j!==1?"s":""," remaining before your IP is blacklisted!"]})]})]})}),e.jsx("button",{type:"submit",disabled:a,className:"w-full py-4 bg-gradient-to-r from-purple-600 to-purple-800 text-white rounded-xl font-semibold text-base transition-all hover:shadow-lg hover:-translate-y-0.5 disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center gap-2 mt-8",children:a?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Connecting..."]}):"Connect"})]}),!m&&e.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have a Data Bucket instance?"," ",e.jsx("a",{href:"https://github.com",target:"_blank",rel:"noopener noreferrer",className:"text-purple-600 font-semibold hover:underline",children:"Check the docs"})]})})]}),m&&e.jsxs("div",{className:"md:pl-8 pt-6 md:pt-0",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Community Server"}),e.jsxs("div",{className:"flex flex-col items-center justify-center md:h-full space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("svg",{width:"80",height:"80",viewBox:"0 0 64 64",fill:"none",className:"mx-auto mb-4 text-purple-600",children:[e.jsx("circle",{cx:"32",cy:"20",r:"8",stroke:"currentColor",strokeWidth:"2.5",fill:"none"}),e.jsx("circle",{cx:"18",cy:"38",r:"6",stroke:"currentColor",strokeWidth:"2.5",fill:"none"}),e.jsx("circle",{cx:"46",cy:"38",r:"6",stroke:"currentColor",strokeWidth:"2.5",fill:"none"}),e.jsx("path",{d:"M26 24 L22 34",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round"}),e.jsx("path",{d:"M38 24 L42 34",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round"}),e.jsx("circle",{cx:"32",cy:"50",r:"6",stroke:"currentColor",strokeWidth:"2.5",fill:"none"}),e.jsx("path",{d:"M20 42 L28 46",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round"}),e.jsx("path",{d:"M44 42 L36 46",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round"})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Join the Community"}),e.jsx("p",{className:"text-sm text-gray-600 mb-6 max-w-xs mx-auto",children:"Connect to our public community server to test and explore Data Bucket features instantly."})]}),e.jsx("button",{onClick:O,disabled:w,className:"w-full py-4 bg-gradient-to-r from-green-600 to-green-800 text-white rounded-xl font-semibold text-base transition-all hover:shadow-lg hover:-translate-y-0.5 disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:w?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Connecting..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{d:"M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"})}),"Connect to Community Server"]})}),e.jsx("div",{className:"text-xs text-gray-500 text-center max-w-xs",children:e.jsx("p",{children:"No authentication required. Perfect for testing and development."})})]})]})]})]}),e.jsx("style",{children:`
        @keyframes slideUp {
          from {
            opacity: 0;
            transform: translateY(30px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        @keyframes float {
          0%, 100% {
            transform: translateY(0);
          }
          50% {
            transform: translateY(-10px);
          }
        }

        .animate-slideUp {
          animation: slideUp 0.5s ease-out;
        }

        .animate-float {
          animation: float 3s ease-in-out infinite;
        }
      `})]})}function Q({bucketId:i,bucketName:l,connection:d,onBack:h,onDisconnect:p}){const[t,N]=n.useState([]),[a,A]=n.useState(null),[w,_]=n.useState(!0),[$,f]=n.useState(!0),[j,R]=n.useState(""),M=async(s,c={})=>{const b={"Content-Type":"application/json",...d.username&&d.password&&{Authorization:"Basic "+btoa(`${d.username}:${d.password}`)}},u=await fetch(`${d.url}${s}`,{...c,headers:{...b,...c.headers}});if(!u.ok)throw new Error(`API call failed: ${u.statusText}`);return u.json()},S=async()=>{try{const s=await M(`/api/v1/bucket_data/${i}?cleanup=false`);N(Array.isArray(s)?s:[]),_(!1)}catch(s){console.error("Failed to load bucket data:",s),_(!1)}},m=async()=>{if(confirm("Are you sure you want to clear all data from this bucket?"))try{await M(`/api/v1/bucket_data/${i}`,{method:"DELETE"}),N([]),A(null)}catch(s){alert("Failed to clear bucket data: "+s.message)}};n.useEffect(()=>{S();let s;return $&&(s=setInterval(()=>{S()},3e3)),()=>{s&&clearInterval(s)}},[i,$]);const v=s=>({GET:"bg-green-600",POST:"bg-yellow-600",PUT:"bg-blue-600",PATCH:"bg-violet-600",DELETE:"bg-red-600",HEAD:"bg-lime-600",OPTIONS:"bg-purple-600"})[s]||"bg-gray-600",g=((s,c)=>{if(!c||c.trim()==="")return s;const b=c.toLowerCase();return s.filter(u=>{if(u.endpoint&&u.endpoint.toLowerCase().includes(b)||u.method&&u.method.toLowerCase().includes(b)||u.ip&&u.ip.toLowerCase().includes(b))return!0;if(u.headers)for(const[C,E]of Object.entries(u.headers)){const D=C.toLowerCase(),I=typeof E=="object"?JSON.stringify(E).toLowerCase():String(E).toLowerCase();if(D.includes(b)||I.includes(b))return!0}if(u.query)for(const[C,E]of Object.entries(u.query)){const D=C.toLowerCase(),I=typeof E=="object"?JSON.stringify(E).toLowerCase():String(E).toLowerCase();if(D.includes(b)||I.includes(b))return!0}return!!(u.payload&&(typeof u.payload=="object"?JSON.stringify(u.payload).toLowerCase():String(u.payload).toLowerCase()).includes(b))})})(t,j);return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-50 shadow-sm",children:e.jsxs("div",{className:"max-w-[1600px] mx-auto px-8 py-5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("button",{onClick:h,className:"w-10 h-10 border-2 border-gray-200 bg-white rounded-lg flex items-center justify-center text-gray-700 transition-all hover:border-gray-300 hover:bg-gray-50",title:"Back to buckets",children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})}),e.jsxs("nav",{className:"flex items-center text-sm flex-1",children:[e.jsx("button",{onClick:h,className:"text-purple-600 hover:text-purple-800 font-medium transition-colors",children:"Buckets"}),e.jsx("svg",{className:"w-4 h-4 mx-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),e.jsx("span",{className:"text-gray-900 font-semibold",children:l})]}),e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 bg-gray-50 rounded-md text-sm text-gray-700 cursor-pointer select-none",children:[e.jsx("input",{type:"checkbox",checked:$,onChange:s=>f(s.target.checked),className:"cursor-pointer"}),e.jsx("span",{children:"Auto-refresh"})]}),e.jsx("button",{onClick:m,className:"px-5 py-2.5 bg-white border-2 border-red-200 rounded-lg text-red-700 font-semibold transition-all hover:bg-red-50",children:"Clear Data"}),e.jsx("button",{onClick:p,className:"px-5 py-2.5 bg-white border-2 border-gray-200 rounded-lg text-gray-700 font-semibold transition-all hover:border-gray-300 hover:bg-gray-50",children:"Disconnect"})]})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:l}),e.jsxs("p",{className:"text-sm text-gray-600 font-mono",children:["ID: ",i]})]})]})}),e.jsxs("div",{className:"max-w-[1600px] mx-auto px-4 sm:px-8 py-6 grid grid-cols-1 lg:grid-cols-[400px_1fr] gap-6 min-h-[calc(100vh-140px)]",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm flex flex-col overflow-hidden max-h-[400px] lg:max-h-none",children:[e.jsxs("div",{className:"px-4 sm:px-6 py-4 sm:py-5 border-b border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("h2",{className:"text-base sm:text-lg font-bold text-gray-900",children:["Requests (",g.length,g.length!==t.length&&` of ${t.length}`,")"]}),e.jsx("button",{onClick:S,className:"w-7 h-7 sm:w-8 sm:h-8 bg-gray-50 rounded-md flex items-center justify-center text-gray-700 transition-all hover:bg-gray-200",title:"Refresh",children:e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"currentColor",className:"sm:w-4 sm:h-4",children:[e.jsx("path",{fillRule:"evenodd",d:"M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"}),e.jsx("path",{d:"M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"})]})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:j,onChange:s=>R(s.target.value),placeholder:"Search in URL, headers, params, payload...",className:"w-full px-3 py-2 pl-9 text-xs sm:text-sm border-2 border-gray-200 rounded-lg transition-all outline-none focus:border-purple-600 focus:ring-4 focus:ring-purple-100 placeholder-gray-400"}),e.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),j&&e.jsx("button",{onClick:()=>R(""),className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 hover:text-gray-600 transition-colors",title:"Clear search",children:e.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),w?e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 sm:p-15 text-gray-600",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 border-4 border-gray-200 border-t-purple-600 rounded-full animate-spin mb-3 sm:mb-4"}),e.jsx("p",{className:"text-sm sm:text-base",children:"Loading requests..."})]}):t.length===0?e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 sm:p-15 text-gray-300 text-center",children:[e.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 60 60",fill:"none",className:"mb-2 sm:mb-3 sm:w-15 sm:h-15",children:[e.jsx("rect",{x:"10",y:"15",width:"40",height:"30",rx:"3",stroke:"currentColor",strokeWidth:"2",fill:"none"}),e.jsx("path",{d:"M15 25 L45 25",stroke:"currentColor",strokeWidth:"2"}),e.jsx("circle",{cx:"30",cy:"35",r:"4",fill:"currentColor",opacity:"0.3"})]}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-1",children:"No requests captured yet"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-400",children:"Send data to this bucket's endpoint"})]}):g.length===0?e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 sm:p-15 text-gray-300 text-center",children:[e.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 60 60",fill:"none",className:"mb-2 sm:mb-3 sm:w-15 sm:h-15",children:[e.jsx("path",{d:"M30 10 L50 30 L30 50 L10 30 Z",stroke:"currentColor",strokeWidth:"2",fill:"none"}),e.jsx("circle",{cx:"30",cy:"30",r:"3",fill:"currentColor",opacity:"0.3"})]}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-1",children:"No matching requests found"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-400",children:"Try a different search term"})]}):e.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:[...g].reverse().map(s=>{const c=t.indexOf(s);return e.jsxs("div",{className:`p-3 sm:p-4 border-2 rounded-lg mb-2 cursor-pointer transition-all ${a===c?"border-purple-600 bg-purple-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,onClick:()=>A(c),children:[e.jsxs("div",{className:"flex justify-between items-center mb-1.5 sm:mb-2",children:[e.jsx("span",{className:`px-2 sm:px-2.5 py-0.5 sm:py-1 ${v(s.method)} text-white rounded text-[10px] sm:text-xs font-bold font-mono tracking-wide`,children:s.method}),e.jsxs("span",{className:"text-[10px] sm:text-xs text-gray-400 font-semibold",children:["#",c+1]})]}),e.jsx("div",{className:"text-[10px] sm:text-xs text-gray-600 mb-1",children:new Date(s.timestamp).toLocaleString()}),e.jsx("div",{className:"text-[10px] sm:text-xs text-gray-700 font-mono break-all",children:s.endpoint})]},c)})})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm flex flex-col overflow-hidden",children:a===null?e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 sm:p-20 text-gray-300",children:[e.jsxs("svg",{width:"60",height:"60",viewBox:"0 0 80 80",fill:"none",className:"mb-4 sm:mb-6 sm:w-20 sm:h-20",children:[e.jsx("rect",{x:"15",y:"20",width:"50",height:"40",rx:"4",stroke:"currentColor",strokeWidth:"3",fill:"none",opacity:"0.3"}),e.jsx("path",{d:"M25 35 L55 35",stroke:"currentColor",strokeWidth:"3",opacity:"0.3"}),e.jsx("path",{d:"M25 45 L50 45",stroke:"currentColor",strokeWidth:"3",opacity:"0.3"}),e.jsx("path",{d:"M25 52 L45 52",stroke:"currentColor",strokeWidth:"3",opacity:"0.3"})]}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Select a request to view details"})]}):e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4 sm:mb-8 pb-3 sm:pb-5 border-b-2 border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg sm:text-2xl font-bold text-gray-900 mb-1 sm:mb-2",children:"Request Details"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:new Date(t[a].timestamp).toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})})]}),e.jsx("span",{className:`px-2 py-1 sm:px-4 sm:py-2 ${v(t[a].method)} text-white rounded-md text-xs sm:text-sm font-bold font-mono tracking-wider sm:tracking-widest`,children:t[a].method})]}),e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("section",{children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-900 mb-3 sm:mb-4",children:"General"}),e.jsxs("div",{className:"space-y-2 sm:space-y-2.5",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row py-2 sm:py-2.5 border-b border-gray-100",children:[e.jsx("span",{className:"text-xs sm:text-sm font-semibold text-gray-600 mb-1 sm:mb-0 sm:w-36 sm:flex-shrink-0",children:"Method:"}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-900 break-all",children:t[a].method})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row py-2 sm:py-2.5 border-b border-gray-100",children:[e.jsx("span",{className:"text-xs sm:text-sm font-semibold text-gray-600 mb-1 sm:mb-0 sm:w-36 sm:flex-shrink-0",children:"Endpoint:"}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-900 bg-gray-50 px-2 py-1 rounded font-mono break-all",children:t[a].endpoint})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row py-2 sm:py-2.5 border-b border-gray-100",children:[e.jsx("span",{className:"text-xs sm:text-sm font-semibold text-gray-600 mb-1 sm:mb-0 sm:w-36 sm:flex-shrink-0",children:"IP Address:"}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-900 break-all",children:t[a].ip})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row py-2 sm:py-2.5",children:[e.jsx("span",{className:"text-xs sm:text-sm font-semibold text-gray-600 mb-1 sm:mb-0 sm:w-36 sm:flex-shrink-0",children:"Timestamp:"}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-900 break-all",children:t[a].timestamp})]})]})]}),t[a].headers&&Object.keys(t[a].headers).length>0&&e.jsxs("section",{children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-4",children:"Headers"}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Header"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Value"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Object.entries(t[a].headers).map(([s,c])=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-mono text-gray-900 break-all",children:s}),e.jsx("td",{className:"px-4 py-3 text-sm font-mono text-gray-700 break-all",children:typeof c=="object"?JSON.stringify(c):String(c)})]},s))})]})})]}),t[a].query&&Object.keys(t[a].query).length>0&&e.jsxs("section",{children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-4",children:"Query Parameters"}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Key"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Value"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Object.entries(t[a].query).map(([s,c])=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-mono text-gray-900 break-all",children:s}),e.jsx("td",{className:"px-4 py-3 text-sm font-mono text-gray-700 break-all",children:typeof c=="object"?JSON.stringify(c):String(c)})]},s))})]})})]}),t[a].payload&&e.jsxs("section",{children:[e.jsxs("h3",{className:"text-base font-semibold text-gray-900 mb-4",children:["Payload",t[a].payload_type&&e.jsx("span",{className:"ml-2 text-xs font-normal text-gray-500 bg-gray-100 px-2 py-1 rounded",children:t[a].payload_type})]}),(()=>{const s=t[a].payload_type,c=t[a].payload;return(s==="form-urlencoded"||s==="multipart-form-data")&&typeof c=="object"&&!Array.isArray(c)?e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Field"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Value"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Object.entries(c).map(([b,u])=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-mono text-gray-900 break-all",children:b}),e.jsx("td",{className:"px-4 py-3 text-sm font-mono text-gray-700 break-all",children:typeof u=="object"?JSON.stringify(u):String(u)})]},b))})]})}):e.jsx("div",{className:"bg-gray-900 rounded-lg p-4 overflow-x-auto",children:e.jsx("pre",{className:"text-sm text-gray-300 font-mono leading-relaxed whitespace-pre-wrap break-words",children:typeof c=="string"?c:JSON.stringify(c,null,2)})})})()]})]})]})})]})]})}function X({connection:i,onDisconnect:l}){const[d,h]=n.useState({}),[p,t]=n.useState(!1),[N,a]=n.useState(!1),[A,w]=n.useState(null),[_,$]=n.useState("list"),[f,j]=n.useState(null),[R,M]=n.useState(!0),[S,m]=n.useState(null),[v,O]=n.useState(()=>localStorage.getItem("isCommunityServer")==="true"),g=async(r,o={})=>{const x={"Content-Type":"application/json",...i.username&&i.password&&{Authorization:"Basic "+btoa(`${i.username}:${i.password}`)}},k=await fetch(`${i.url}${r}`,{...o,headers:{...x,...o.headers}});if(!k.ok)throw new Error(`API call failed: ${k.statusText}`);return k.json()},s=async()=>{try{if(M(!0),v){const x=JSON.parse(localStorage.getItem("localBuckets")||"{}");h(x),M(!1);const k={...x},P=[];await Promise.all(Object.keys(x).map(async y=>{try{const B=await fetch(`${i.url}/api/v1/bucket_data/${y}?cleanup=false`,{headers:{"Content-Type":"application/json"}});if(B.ok){const L=await B.json();if(L.error)console.log(`Bucket ${y} not found on server, removing from cache. Error: ${L.error}`),P.push(y);else{console.log(`Bucket ${y} data:`,L);const T=Array.isArray(L)?L:L.requests||[],q=T.length||0,W=T.length>0?T[T.length-1].timestamp:null;console.log(`Bucket ${y} - Request count: ${q}, Last request: ${W}`),k[y]={...x[y],request_count:q,last_request_at:W}}}else if(B.status===404||B.status===500)try{const L=await B.json();L.error&&L.error.includes("not found")?(console.log(`Bucket ${y} not found (status ${B.status}), removing from cache`),P.push(y)):console.log(`Bucket ${y} returned status ${B.status} with error: ${L.error}`)}catch{console.log(`Bucket ${y} returned status ${B.status}`)}else console.log(`Bucket ${y} returned status ${B.status}`)}catch(B){console.warn(`Failed to fetch data for bucket ${y}:`,B)}})),P.length>0&&(console.log(`Removing ${P.length} bucket(s) from cache:`,P),P.forEach(y=>{delete k[y]}),localStorage.setItem("localBuckets",JSON.stringify(k))),console.log("Final updated buckets before setState:",k),h(k);return}const r=await fetch(`${i.url}/api/v1/buckets`,{headers:{"Content-Type":"application/json",...i.username&&i.password&&{Authorization:"Basic "+btoa(`${i.username}:${i.password}`)}}});if(!r.ok)throw new Error(`Failed to load buckets: ${r.statusText}`);const o=await r.json();h(o.buckets||{})}catch(r){console.error("Failed to load buckets:",r),h({})}finally{M(!1)}};n.useEffect(()=>{s();const r=setInterval(()=>{s()},1e4);return()=>clearInterval(r)},[]);const c=async(r,o,x,k,P)=>{try{if(Object.keys(d).length>=U.maxBucketsPerUser){alert(`You have reached the maximum limit of ${U.maxBucketsPerUser} buckets. Please delete a bucket before creating a new one.`);return}const B=await g("/api/v1/create_bucket",{method:"POST",body:JSON.stringify({name:r,mock_response:o||{},mock_headers:x||{},mock_status_code:k||200,mock_response_type:P||"json"})});if(v){const L=B.bucket_id,T={name:r,mock_response:o||{},mock_headers:x||{},mock_status_code:k||200,mock_response_type:P||"json",created_at:new Date().toISOString(),request_count:0,max_requests:100,last_request_at:null},q={...d,[L]:T};localStorage.setItem("localBuckets",JSON.stringify(q)),h(q)}else await s();t(!1)}catch(y){alert("Failed to create bucket: "+y.message)}},b=async(r,o)=>{try{if(await g(`/api/v1/bucket/${r}`,{method:"PUT",body:JSON.stringify(o)}),v){const x={...d,[r]:{...d[r],...o}};localStorage.setItem("localBuckets",JSON.stringify(x)),h(x)}else h(x=>({...x,[r]:{...x[r],...o}}));a(!1),w(null)}catch(x){alert("Failed to update bucket: "+x.message)}},u=async r=>{if(confirm("Are you sure you want to delete this bucket?"))try{if(await g(`/api/v1/bucket/${r}/clean`,{method:"DELETE"}),v){const o={...d};delete o[r],localStorage.setItem("localBuckets",JSON.stringify(o)),h(o)}else h(o=>{const x={...o};return delete x[r],x})}catch(o){alert("Failed to delete bucket: "+o.message)}},C=r=>{j(r),$("data")},E=r=>{w({id:r,...d[r]}),a(!0)},D=()=>{$("list"),j(null),s()},I=(r,o)=>{r.stopPropagation();const x=`${i.url}/api/v1/bucket_data/${o}/data`;navigator.clipboard.writeText(x).then(()=>{m(o),setTimeout(()=>m(null),2e3)}).catch(k=>{console.error("Failed to copy endpoint:",k),alert("Failed to copy to clipboard")})};return _==="data"&&f?e.jsx(Q,{bucketId:f,bucketName:d[f]?.name,connection:i,onBack:D,onDisconnect:l}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-50 shadow-sm",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-8 py-5 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Data Bucket"}),e.jsxs("span",{className:"inline-block px-3 py-1 bg-green-100 text-green-800 rounded-full text-xs font-semibold",children:["Connected to ",i.url]})]}),e.jsx("button",{onClick:l,className:"px-5 py-2.5 bg-white border-2 border-gray-200 rounded-lg text-gray-700 font-semibold transition-all hover:border-gray-300 hover:bg-gray-50",children:"Disconnect"})]})}),v&&e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-600",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-8 py-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 sm:h-6 sm:w-6 text-yellow-600",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold text-yellow-800",children:"Community Server - Testing Only"}),e.jsxs("div",{className:"mt-2 text-xs sm:text-sm text-yellow-700",children:[e.jsxs("p",{className:"mb-1",children:["You are connected to a ",e.jsx("strong",{children:"shared public instance"})," for testing purposes only."]}),e.jsxs("p",{className:"mb-1",children:[e.jsx("strong",{children:"Note:"})," All request data received in buckets is stored in ",e.jsx("strong",{children:"memory only"})," and is ",e.jsx("strong",{children:"not persistent"}),". Data will be lost on server restart."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Important:"})," Do not share your bucket IDs with unknown people or use this for sensitive data."]})]})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-8 py-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"My Buckets"}),e.jsx("button",{onClick:()=>t(!0),className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-purple-800 text-white rounded-lg font-semibold transition-all hover:shadow-lg hover:-translate-y-0.5",children:"+ Create New Bucket"})]}),R?e.jsxs("div",{className:"bg-white rounded-2xl p-20 text-center shadow-sm",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-purple-600 rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading buckets..."})]}):Object.keys(d).length===0?e.jsxs("div",{className:"bg-white rounded-2xl p-20 text-center shadow-sm",children:[e.jsx("div",{className:"text-gray-300 mb-6",children:e.jsxs("svg",{width:"80",height:"80",viewBox:"0 0 80 80",fill:"none",className:"mx-auto",children:[e.jsx("rect",{x:"10",y:"20",width:"60",height:"50",rx:"5",stroke:"currentColor",strokeWidth:"3",fill:"none"}),e.jsx("path",{d:"M20 35 L60 35",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round"}),e.jsx("circle",{cx:"40",cy:"50",r:"8",fill:"currentColor",opacity:"0.3"})]})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:"No buckets yet"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"Create your first bucket to start capturing webhook data"}),e.jsx("button",{onClick:()=>t(!0),className:"px-7 py-3.5 bg-gradient-to-r from-purple-600 to-purple-800 text-white rounded-lg font-semibold transition-all hover:shadow-xl hover:-translate-y-0.5",children:"Create Your First Bucket"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Object.entries(d).map(([r,o])=>e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-6 transition-all hover:border-gray-300 hover:shadow-xl hover:-translate-y-1 flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-start mb-5",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 flex-1",children:o.name}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>E(r),className:"w-8 h-8 bg-blue-50 text-blue-700 rounded-md flex items-center justify-center transition-all hover:bg-blue-100",title:"Edit bucket",children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M11.013 1.427a1.75 1.75 0 0 1 2.474 0l1.086 1.086a1.75 1.75 0 0 1 0 2.474l-8.61 8.61c-.21.21-.47.364-.756.445l-3.251.93a.75.75 0 0 1-.927-.928l.929-3.25a1.75 1.75 0 0 1 .445-.758l8.61-8.61Zm.176 4.823L9.75 4.81l-6.286 6.287a.25.25 0 0 0-.064.108l-.558 1.953 1.953-.558a.249.249 0 0 0 .108-.064l6.286-6.286Z"})})}),e.jsx("button",{onClick:()=>u(r),className:"w-8 h-8 bg-red-50 text-red-700 rounded-md flex items-center justify-center transition-all hover:bg-red-200",title:"Delete bucket",children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M11 1.75V3h2.25a.75.75 0 0 1 0 1.5H2.75a.75.75 0 0 1 0-1.5H5V1.75C5 .784 5.784 0 6.75 0h2.5C10.216 0 11 .784 11 1.75ZM4.496 6.675l.66 6.6a.25.25 0 0 0 .249.225h5.19a.25.25 0 0 0 .249-.225l.66-6.6a.75.75 0 0 1 1.492.149l-.66 6.6A1.748 1.748 0 0 1 10.595 15h-5.19a1.75 1.75 0 0 1-1.741-1.575l-.66-6.6a.75.75 0 1 1 1.492-.15ZM6.5 1.75V3h3V1.75a.25.25 0 0 0-.25-.25h-2.5a.25.25 0 0 0-.25.25Z"})})})]})]}),e.jsxs("div",{className:"space-y-3 mb-5 flex-1",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider block mb-1",children:"Bucket ID:"}),e.jsx("code",{className:"text-sm text-gray-700 bg-gray-50 px-2.5 py-1.5 rounded block break-all font-mono",children:r})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider block mb-1",children:"Endpoint:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("code",{className:"text-xs text-gray-700 bg-gray-50 px-2.5 py-1.5 rounded block break-all font-mono flex-1",children:[i.url,"/api/v1/bucket_data/",r,"/data"]}),e.jsx("button",{onClick:x=>I(x,r),className:`flex-shrink-0 w-8 h-8 rounded-md flex items-center justify-center transition-all ${S===r?"bg-green-100 text-green-700":"bg-purple-50 text-purple-700 hover:bg-purple-100"}`,title:S===r?"Copied!":"Copy full endpoint URL",children:S===r?e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.75.75 0 0 1 1.06-1.06L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"})}):e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"currentColor",children:[e.jsx("path",{d:"M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"}),e.jsx("path",{d:"M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"})]})})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider block mb-1",children:"Created:"}),e.jsx("span",{className:"text-sm text-gray-700",children:o.created_at?new Date(o.created_at).toLocaleString():"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider block mb-1",children:"Requests:"}),e.jsx("span",{className:"text-sm text-gray-700",children:o.request_count||0})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider block mb-1",children:"Last Request:"}),e.jsx("span",{className:"text-sm text-gray-700",children:o.last_request_at?new Date(o.last_request_at).toLocaleString():"None"})]})]}),e.jsx("button",{onClick:()=>C(r),className:"w-full py-3 bg-gradient-to-r from-purple-600 to-purple-800 text-white rounded-lg font-semibold transition-all hover:shadow-lg hover:-translate-y-0.5",children:"Open Bucket"})]},r))})]}),p&&e.jsx(Y,{title:"Create New Bucket",onClose:()=>t(!1),onSubmit:c,existingBuckets:d}),N&&A&&e.jsx(Y,{title:"Edit Bucket",initialData:A,onClose:()=>{a(!1),w(null)},onSubmit:(r,o,x,k,P)=>{b(A.id,{name:r,mock_response:o,mock_headers:x,mock_status_code:k,mock_response_type:P})},existingBuckets:d})]})}function Y({title:i,initialData:l,onClose:d,onSubmit:h,existingBuckets:p}){const[t,N]=n.useState(l?.name||""),[a,A]=n.useState(l?.mock_response_type||"json"),[w,_]=n.useState(()=>l?.mock_response?(l.mock_response_type==="json"||!l.mock_response_type)&&typeof l.mock_response=="object"?JSON.stringify(l.mock_response,null,2):l.mock_response:'{"message": "Success"}'),[$,f]=n.useState((l?.mock_status_code||200).toString()),[j,R]=n.useState(""),M=m=>{A(m),(!l||w==='{"message": "Success"}'||w===`<?xml version="1.0"?>
<response>
  <message>Success</message>
</response>`||w==="Success message")&&(m==="json"?_('{"message": "Success"}'):m==="xml"?_(`<?xml version="1.0"?>
<response>
  <message>Success</message>
</response>`):m==="text"&&_("ok recieved!"))},S=m=>{if(m.preventDefault(),R(""),p&&Object.values(p).some(O=>l&&O.name===l.name?t!==l.name&&O.name===t:O.name===t)){R("A bucket with this name already exists. Please choose a different name.");return}try{let v;a==="json"?v=JSON.parse(w):v=w,h(t,v,{},parseInt($),a)}catch{alert("Invalid JSON in mock response")}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[1000] p-5",onClick:d,children:e.jsxs("div",{className:"bg-white rounded-xl max-w-lg w-full shadow-2xl animate-modalSlide",onClick:m=>m.stopPropagation(),children:[e.jsxs("div",{className:"px-6 py-5 border-b border-gray-200 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:i}),e.jsx("button",{onClick:d,className:"w-8 h-8 bg-gray-50 rounded-md text-gray-600 text-2xl flex items-center justify-center transition-all hover:bg-gray-200 hover:text-gray-900",children:"×"})]}),e.jsxs("form",{onSubmit:S,className:"p-6",children:[e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Bucket Name"}),e.jsx("input",{type:"text",value:t,onChange:m=>{N(m.target.value),R("")},placeholder:"My Webhook Bucket",required:!0,className:`w-full px-3 py-3 border-2 rounded-lg transition-all outline-none ${j?"border-red-500 focus:border-red-600 focus:ring-4 focus:ring-red-100":"border-gray-200 focus:border-purple-600 focus:ring-4 focus:ring-purple-100"}`}),j&&e.jsx("p",{className:"mt-2 text-sm text-red-600 font-medium",children:j})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Response Type"}),e.jsxs("select",{value:a,onChange:m=>M(m.target.value),className:"w-full px-3 py-3 border-2 border-gray-200 rounded-lg transition-all outline-none focus:border-purple-600 focus:ring-4 focus:ring-purple-100",children:[e.jsx("option",{value:"json",children:"JSON (application/json)"}),e.jsx("option",{value:"xml",children:"XML (application/xml)"}),e.jsx("option",{value:"text",children:"Plain Text (text/plain)"})]})]}),e.jsxs("div",{className:"mb-5",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Mock Response ",a==="json"?"(JSON)":a==="xml"?"(XML)":"(Text)"]}),e.jsx("textarea",{value:w,onChange:m=>_(m.target.value),rows:6,placeholder:a==="json"?'{"message": "Success"}':a==="xml"?`<?xml version="1.0"?>
<response>
  <message>Success</message>
</response>`:"Success message",required:!0,className:"w-full px-3 py-3 border-2 border-gray-200 rounded-lg font-mono resize-y transition-all outline-none focus:border-purple-600 focus:ring-4 focus:ring-purple-100"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Mock Status Code"}),e.jsx("input",{type:"number",value:$,onChange:m=>f(m.target.value),placeholder:"200",required:!0,className:"w-full px-3 py-3 border-2 border-gray-200 rounded-lg transition-all outline-none focus:border-purple-600 focus:ring-4 focus:ring-purple-100"})]}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{type:"button",onClick:d,className:"px-5 py-2.5 bg-white border-2 border-gray-200 rounded-lg text-gray-700 font-semibold transition-all hover:border-gray-300 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-5 py-2.5 bg-gradient-to-r from-purple-600 to-purple-800 text-white rounded-lg font-semibold transition-all hover:shadow-lg hover:-translate-y-0.5",children:l?"Update Bucket":"Create Bucket"})]})]}),e.jsx("style",{children:`
          @keyframes modalSlide {
            from {
              opacity: 0;
              transform: translateY(-30px);
            }
            to {
              opacity: 1;
              transform: translateY(0);
            }
          }

          .animate-modalSlide {
            animation: modalSlide 0.3s ease-out;
          }
        `})]})})}function ee(){const[i,l]=n.useState(null);n.useEffect(()=>{const p=localStorage.getItem("dataBucketUrl"),t=localStorage.getItem("dataBucketUsername"),N=localStorage.getItem("dataBucketPassword");p&&l({url:p,username:t||"",password:N||""})},[]);const d=p=>{l(p)},h=()=>{localStorage.removeItem("dataBucketUrl"),localStorage.removeItem("dataBucketUsername"),localStorage.removeItem("dataBucketPassword"),l(null)};return i?e.jsx(X,{connection:i,onDisconnect:h}):e.jsx(G,{onConnect:d})}export{ee as default};
