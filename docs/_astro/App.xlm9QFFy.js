import{r as o}from"./index.WFquGv8Z.js";var M={exports:{}},C={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _;function D(){if(_)return C;_=1;var i=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function c(d,l,t){var h=null;if(t!==void 0&&(h=""+t),l.key!==void 0&&(h=""+l.key),"key"in l){t={};for(var s in l)s!=="key"&&(t[s]=l[s])}else t=l;return l=t.ref,{$$typeof:i,type:d,key:h,ref:l!==void 0?l:null,props:t}}return C.Fragment=n,C.jsx=c,C.jsxs=c,C}var R;function $(){return R||(R=1,M.exports=D()),M.exports}var e=$();function U({onConnect:i}){const[n,c]=o.useState("http://localhost:8080"),[d,l]=o.useState(""),[t,h]=o.useState(""),[s,g]=o.useState(!1),[b,y]=o.useState(""),x=async m=>{m.preventDefault(),y(""),g(!0);try{const j=await fetch(`${n}/api/v1/ping`,{method:"GET",headers:{"Content-Type":"application/json",...d&&t&&{Authorization:"Basic "+btoa(`${d}:${t}`)}}});if(!j.ok)throw new Error("Connection failed");if((await j.json()).status==="ok")localStorage.setItem("dataBucketUrl",n),localStorage.setItem("dataBucketUsername",d),localStorage.setItem("dataBucketPassword",t),i({url:n,username:d,password:t});else throw new Error("Invalid response from server")}catch{y("Failed to connect to Data Bucket API. Please check the URL and credentials.")}finally{g(!1)}};return e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-600 to-purple-900 p-5",children:[e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-12 max-w-md w-full animate-slideUp",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("div",{className:"inline-block text-purple-600 mb-4 animate-float",children:e.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 64 64",fill:"none",className:"mx-auto",children:[e.jsx("rect",{x:"8",y:"16",width:"48",height:"40",rx:"4",stroke:"currentColor",strokeWidth:"3",fill:"none"}),e.jsx("path",{d:"M16 28 L48 28",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round"}),e.jsx("circle",{cx:"32",cy:"40",r:"6",fill:"currentColor"}),e.jsx("path",{d:"M8 24 L56 24",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round"})]})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Data Bucket"}),e.jsx("p",{className:"text-gray-600",children:"Connect to your Data Bucket API"})]}),e.jsxs("form",{onSubmit:x,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"url",className:"block text-sm font-semibold text-gray-700 mb-2",children:"API URL"}),e.jsx("input",{id:"url",type:"text",value:n,onChange:m=>c(m.target.value),placeholder:"http://localhost:8080",required:!0,className:"w-full px-4 py-3.5 border-2 border-gray-200 rounded-xl text-base transition-all outline-none bg-gray-50 focus:border-purple-600 focus:bg-white focus:ring-4 focus:ring-purple-100 placeholder-gray-400"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Username"}),e.jsx("input",{id:"username",type:"text",value:d,onChange:m=>l(m.target.value),placeholder:"Enter username (optional)",className:"w-full px-4 py-3.5 border-2 border-gray-200 rounded-xl text-base transition-all outline-none bg-gray-50 focus:border-purple-600 focus:bg-white focus:ring-4 focus:ring-purple-100 placeholder-gray-400"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Password"}),e.jsx("input",{id:"password",type:"password",value:t,onChange:m=>h(m.target.value),placeholder:"Enter password (optional)",className:"w-full px-4 py-3.5 border-2 border-gray-200 rounded-xl text-base transition-all outline-none bg-gray-50 focus:border-purple-600 focus:bg-white focus:ring-4 focus:ring-purple-100 placeholder-gray-400"})]}),b&&e.jsx("div",{className:"p-3 bg-red-100 text-red-700 rounded-lg text-sm border-l-4 border-red-700",children:b}),e.jsx("button",{type:"submit",disabled:s,className:"w-full py-4 bg-gradient-to-r from-purple-600 to-purple-800 text-white rounded-xl font-semibold text-base transition-all hover:shadow-lg hover:-translate-y-0.5 disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center gap-2 mt-8",children:s?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Connecting..."]}):"Connect"})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have a Data Bucket instance?"," ",e.jsx("a",{href:"https://github.com",target:"_blank",rel:"noopener noreferrer",className:"text-purple-600 font-semibold hover:underline",children:"Check the docs"})]})})]}),e.jsx("style",{children:`
        @keyframes slideUp {
          from {
            opacity: 0;
            transform: translateY(30px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        @keyframes float {
          0%, 100% {
            transform: translateY(0);
          }
          50% {
            transform: translateY(-10px);
          }
        }

        .animate-slideUp {
          animation: slideUp 0.5s ease-out;
        }

        .animate-float {
          animation: float 3s ease-in-out infinite;
        }
      `})]})}function q({bucketId:i,bucketName:n,connection:c,onBack:d,onDisconnect:l}){const[t,h]=o.useState([]),[s,g]=o.useState(null),[b,y]=o.useState(!0),[x,m]=o.useState(!0),j=async(a,f={})=>{const B={"Content-Type":"application/json",...c.username&&c.password&&{Authorization:"Basic "+btoa(`${c.username}:${c.password}`)}},N=await fetch(`${c.url}${a}`,{...f,headers:{...B,...f.headers}});if(!N.ok)throw new Error(`API call failed: ${N.statusText}`);return N.json()},w=async()=>{try{const a=await j(`/api/v1/bucket_data/${i}?cleanup=false`);h(Array.isArray(a)?a:[]),y(!1)}catch(a){console.error("Failed to load bucket data:",a),y(!1)}},S=async()=>{if(confirm("Are you sure you want to clear all data from this bucket?"))try{await j(`/api/v1/bucket_data/${i}`,{method:"DELETE"}),h([]),g(null)}catch(a){alert("Failed to clear bucket data: "+a.message)}};o.useEffect(()=>{w();let a;return x&&(a=setInterval(()=>{w()},3e3)),()=>{a&&clearInterval(a)}},[i,x]);const v=a=>({GET:"bg-blue-600",POST:"bg-green-600",PUT:"bg-yellow-600",DELETE:"bg-red-600",PATCH:"bg-purple-600"})[a]||"bg-gray-600";return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-50 shadow-sm",children:e.jsxs("div",{className:"max-w-[1600px] mx-auto px-8 py-5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("button",{onClick:d,className:"w-10 h-10 border-2 border-gray-200 bg-white rounded-lg flex items-center justify-center text-gray-700 transition-all hover:border-gray-300 hover:bg-gray-50",title:"Back to buckets",children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})}),e.jsxs("nav",{className:"flex items-center text-sm flex-1",children:[e.jsx("button",{onClick:d,className:"text-purple-600 hover:text-purple-800 font-medium transition-colors",children:"Buckets"}),e.jsx("svg",{className:"w-4 h-4 mx-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),e.jsx("span",{className:"text-gray-900 font-semibold",children:n})]}),e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 bg-gray-50 rounded-md text-sm text-gray-700 cursor-pointer select-none",children:[e.jsx("input",{type:"checkbox",checked:x,onChange:a=>m(a.target.checked),className:"cursor-pointer"}),e.jsx("span",{children:"Auto-refresh"})]}),e.jsx("button",{onClick:S,className:"px-5 py-2.5 bg-white border-2 border-red-200 rounded-lg text-red-700 font-semibold transition-all hover:bg-red-50",children:"Clear Data"}),e.jsx("button",{onClick:l,className:"px-5 py-2.5 bg-white border-2 border-gray-200 rounded-lg text-gray-700 font-semibold transition-all hover:border-gray-300 hover:bg-gray-50",children:"Disconnect"})]})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:n}),e.jsxs("p",{className:"text-sm text-gray-600 font-mono",children:["ID: ",i]})]})]})}),e.jsxs("div",{className:"max-w-[1600px] mx-auto px-8 py-6 grid grid-cols-1 lg:grid-cols-[400px_1fr] gap-6 min-h-[calc(100vh-140px)]",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-5 border-b border-gray-200 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-900",children:["Requests (",t.length,")"]}),e.jsx("button",{onClick:w,className:"w-8 h-8 bg-gray-50 rounded-md flex items-center justify-center text-gray-700 transition-all hover:bg-gray-200",title:"Refresh",children:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:[e.jsx("path",{fillRule:"evenodd",d:"M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"}),e.jsx("path",{d:"M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"})]})})]}),b?e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-15 text-gray-600",children:[e.jsx("div",{className:"w-10 h-10 border-4 border-gray-200 border-t-purple-600 rounded-full animate-spin mb-4"}),e.jsx("p",{children:"Loading requests..."})]}):t.length===0?e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-15 text-gray-300 text-center",children:[e.jsxs("svg",{width:"60",height:"60",viewBox:"0 0 60 60",fill:"none",className:"mb-3",children:[e.jsx("rect",{x:"10",y:"15",width:"40",height:"30",rx:"3",stroke:"currentColor",strokeWidth:"2",fill:"none"}),e.jsx("path",{d:"M15 25 L45 25",stroke:"currentColor",strokeWidth:"2"}),e.jsx("circle",{cx:"30",cy:"35",r:"4",fill:"currentColor",opacity:"0.3"})]}),e.jsx("p",{className:"text-gray-600 mb-1",children:"No requests captured yet"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Send data to this bucket's endpoint"})]}):e.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:t.map((a,f)=>e.jsxs("div",{className:`p-4 border-2 rounded-lg mb-2 cursor-pointer transition-all ${s===f?"border-purple-600 bg-purple-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,onClick:()=>g(f),children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:`px-2.5 py-1 ${v(a.method)} text-white rounded text-xs font-bold font-mono tracking-wide`,children:a.method}),e.jsxs("span",{className:"text-xs text-gray-400 font-semibold",children:["#",t.length-f]})]}),e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:new Date(a.timestamp).toLocaleString()}),e.jsx("div",{className:"text-xs text-gray-700 font-mono break-all",children:a.endpoint})]},f))})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm flex flex-col overflow-hidden",children:s===null?e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-20 text-gray-300",children:[e.jsxs("svg",{width:"80",height:"80",viewBox:"0 0 80 80",fill:"none",className:"mb-6",children:[e.jsx("rect",{x:"15",y:"20",width:"50",height:"40",rx:"4",stroke:"currentColor",strokeWidth:"3",fill:"none",opacity:"0.3"}),e.jsx("path",{d:"M25 35 L55 35",stroke:"currentColor",strokeWidth:"3",opacity:"0.3"}),e.jsx("path",{d:"M25 45 L50 45",stroke:"currentColor",strokeWidth:"3",opacity:"0.3"}),e.jsx("path",{d:"M25 52 L45 52",stroke:"currentColor",strokeWidth:"3",opacity:"0.3"})]}),e.jsx("p",{className:"text-gray-600",children:"Select a request to view details"})]}):e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-8 pb-5 border-b-2 border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Request Details"}),e.jsx("p",{className:"text-sm text-gray-600",children:new Date(t[s].timestamp).toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})})]}),e.jsx("span",{className:`px-4 py-2 ${v(t[s].method)} text-white rounded-md text-sm font-bold font-mono tracking-widest`,children:t[s].method})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-4",children:"General"}),e.jsxs("div",{className:"space-y-2.5",children:[e.jsxs("div",{className:"flex py-2.5 border-b border-gray-100",children:[e.jsx("span",{className:"w-36 text-sm font-semibold text-gray-600 flex-shrink-0",children:"Method:"}),e.jsx("span",{className:"text-sm text-gray-900 break-all",children:t[s].method})]}),e.jsxs("div",{className:"flex py-2.5 border-b border-gray-100",children:[e.jsx("span",{className:"w-36 text-sm font-semibold text-gray-600 flex-shrink-0",children:"Endpoint:"}),e.jsx("span",{className:"text-sm text-gray-900 bg-gray-50 px-2 py-1 rounded font-mono break-all",children:t[s].endpoint})]}),e.jsxs("div",{className:"flex py-2.5 border-b border-gray-100",children:[e.jsx("span",{className:"w-36 text-sm font-semibold text-gray-600 flex-shrink-0",children:"IP Address:"}),e.jsx("span",{className:"text-sm text-gray-900 break-all",children:t[s].ip})]}),e.jsxs("div",{className:"flex py-2.5",children:[e.jsx("span",{className:"w-36 text-sm font-semibold text-gray-600 flex-shrink-0",children:"Timestamp:"}),e.jsx("span",{className:"text-sm text-gray-900 break-all",children:t[s].timestamp})]})]})]}),t[s].headers&&Object.keys(t[s].headers).length>0&&e.jsxs("section",{children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-4",children:"Headers"}),e.jsx("div",{className:"bg-gray-900 rounded-lg p-4 overflow-x-auto",children:e.jsx("pre",{className:"text-sm text-gray-300 font-mono leading-relaxed",children:JSON.stringify(t[s].headers,null,2)})})]}),t[s].query&&Object.keys(t[s].query).length>0&&e.jsxs("section",{children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-4",children:"Query Parameters"}),e.jsx("div",{className:"bg-gray-900 rounded-lg p-4 overflow-x-auto",children:e.jsx("pre",{className:"text-sm text-gray-300 font-mono leading-relaxed",children:JSON.stringify(t[s].query,null,2)})})]}),t[s].payload&&Object.keys(t[s].payload).length>0&&e.jsxs("section",{children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-4",children:"Payload"}),e.jsx("div",{className:"bg-gray-900 rounded-lg p-4 overflow-x-auto",children:e.jsx("pre",{className:"text-sm text-gray-300 font-mono leading-relaxed",children:JSON.stringify(t[s].payload,null,2)})})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-4",children:"Full Request"}),e.jsx("div",{className:"bg-gray-900 rounded-lg p-4 overflow-x-auto",children:e.jsx("pre",{className:"text-sm text-gray-300 font-mono leading-relaxed",children:JSON.stringify(t[s],null,2)})})]})]})]})})]})]})}function O({connection:i,onDisconnect:n}){const[c,d]=o.useState({}),[l,t]=o.useState(!1),[h,s]=o.useState(!1),[g,b]=o.useState(null),[y,x]=o.useState("list"),[m,j]=o.useState(null),[w,S]=o.useState(!0),v=async(r,u={})=>{const p={"Content-Type":"application/json",...i.username&&i.password&&{Authorization:"Basic "+btoa(`${i.username}:${i.password}`)}},k=await fetch(`${i.url}${r}`,{...u,headers:{...p,...u.headers}});if(!k.ok)throw new Error(`API call failed: ${k.statusText}`);return k.json()},a=async()=>{try{S(!0);const r=await v("/api/v1/buckets");d(r.buckets||{})}catch(r){console.error("Failed to load buckets:",r)}finally{S(!1)}};o.useEffect(()=>{a();const r=setInterval(()=>{a()},1e4);return()=>clearInterval(r)},[]);const f=async(r,u,p,k)=>{try{const E=await v("/api/v1/create_bucket",{method:"POST",body:JSON.stringify({name:r,mock_response:u||{},mock_headers:p||{},mock_status_code:k||200})});d(T=>({...T,[E.bucket_id]:{name:r,mock_response:u||{},mock_headers:p||{},mock_status_code:k||200}})),t(!1)}catch(E){alert("Failed to create bucket: "+E.message)}},B=async(r,u)=>{try{await v(`/api/v1/bucket/${r}`,{method:"PUT",body:JSON.stringify(u)}),d(p=>({...p,[r]:{...p[r],...u}})),s(!1),b(null)}catch(p){alert("Failed to update bucket: "+p.message)}},N=async r=>{if(confirm("Are you sure you want to delete this bucket?"))try{await v(`/api/v1/bucket/${r}/clean`,{method:"DELETE"}),d(u=>{const p={...u};return delete p[r],p})}catch(u){alert("Failed to delete bucket: "+u.message)}},P=r=>{j(r),x("data")},A=r=>{b({id:r,...c[r]}),s(!0)},I=()=>{x("list"),j(null),a()};return y==="data"&&m?e.jsx(q,{bucketId:m,bucketName:c[m]?.name,connection:i,onBack:I,onDisconnect:n}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-50 shadow-sm",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-8 py-5 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Data Bucket"}),e.jsxs("span",{className:"inline-block px-3 py-1 bg-green-100 text-green-800 rounded-full text-xs font-semibold",children:["Connected to ",i.url]})]}),e.jsx("button",{onClick:n,className:"px-5 py-2.5 bg-white border-2 border-gray-200 rounded-lg text-gray-700 font-semibold transition-all hover:border-gray-300 hover:bg-gray-50",children:"Disconnect"})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-8 py-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"My Buckets"}),e.jsx("button",{onClick:()=>t(!0),className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-purple-800 text-white rounded-lg font-semibold transition-all hover:shadow-lg hover:-translate-y-0.5",children:"+ Create New Bucket"})]}),w?e.jsxs("div",{className:"bg-white rounded-2xl p-20 text-center shadow-sm",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-purple-600 rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading buckets..."})]}):Object.keys(c).length===0?e.jsxs("div",{className:"bg-white rounded-2xl p-20 text-center shadow-sm",children:[e.jsx("div",{className:"text-gray-300 mb-6",children:e.jsxs("svg",{width:"80",height:"80",viewBox:"0 0 80 80",fill:"none",className:"mx-auto",children:[e.jsx("rect",{x:"10",y:"20",width:"60",height:"50",rx:"5",stroke:"currentColor",strokeWidth:"3",fill:"none"}),e.jsx("path",{d:"M20 35 L60 35",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round"}),e.jsx("circle",{cx:"40",cy:"50",r:"8",fill:"currentColor",opacity:"0.3"})]})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:"No buckets yet"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"Create your first bucket to start capturing webhook data"}),e.jsx("button",{onClick:()=>t(!0),className:"px-7 py-3.5 bg-gradient-to-r from-purple-600 to-purple-800 text-white rounded-lg font-semibold transition-all hover:shadow-xl hover:-translate-y-0.5",children:"Create Your First Bucket"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Object.entries(c).map(([r,u])=>e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-6 transition-all hover:border-gray-300 hover:shadow-xl hover:-translate-y-1 flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-start mb-5",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 flex-1",children:u.name}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>A(r),className:"w-8 h-8 bg-blue-50 text-blue-700 rounded-md flex items-center justify-center transition-all hover:bg-blue-100",title:"Edit bucket",children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M11.013 1.427a1.75 1.75 0 0 1 2.474 0l1.086 1.086a1.75 1.75 0 0 1 0 2.474l-8.61 8.61c-.21.21-.47.364-.756.445l-3.251.93a.75.75 0 0 1-.927-.928l.929-3.25a1.75 1.75 0 0 1 .445-.758l8.61-8.61Zm.176 4.823L9.75 4.81l-6.286 6.287a.25.25 0 0 0-.064.108l-.558 1.953 1.953-.558a.249.249 0 0 0 .108-.064l6.286-6.286Z"})})}),e.jsx("button",{onClick:()=>N(r),className:"w-8 h-8 bg-red-50 text-red-700 rounded-md flex items-center justify-center transition-all hover:bg-red-200",title:"Delete bucket",children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M11 1.75V3h2.25a.75.75 0 0 1 0 1.5H2.75a.75.75 0 0 1 0-1.5H5V1.75C5 .784 5.784 0 6.75 0h2.5C10.216 0 11 .784 11 1.75ZM4.496 6.675l.66 6.6a.25.25 0 0 0 .249.225h5.19a.25.25 0 0 0 .249-.225l.66-6.6a.75.75 0 0 1 1.492.149l-.66 6.6A1.748 1.748 0 0 1 10.595 15h-5.19a1.75 1.75 0 0 1-1.741-1.575l-.66-6.6a.75.75 0 1 1 1.492-.15ZM6.5 1.75V3h3V1.75a.25.25 0 0 0-.25-.25h-2.5a.25.25 0 0 0-.25.25Z"})})})]})]}),e.jsxs("div",{className:"space-y-3 mb-5 flex-1",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider block mb-1",children:"Bucket ID:"}),e.jsx("code",{className:"text-sm text-gray-700 bg-gray-50 px-2.5 py-1.5 rounded block break-all font-mono",children:r})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider block mb-1",children:"Endpoint:"}),e.jsxs("code",{className:"text-xs text-gray-700 bg-gray-50 px-2.5 py-1.5 rounded block break-all font-mono",children:["/bucket_data/",r,"/data"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider block mb-1",children:"Mock Status:"}),e.jsx("span",{className:"inline-block px-3 py-1 bg-green-100 text-green-800 rounded font-semibold text-sm",children:u.mock_status_code||200})]})]}),e.jsx("button",{onClick:()=>P(r),className:"w-full py-3 bg-gradient-to-r from-purple-600 to-purple-800 text-white rounded-lg font-semibold transition-all hover:shadow-lg hover:-translate-y-0.5",children:"Open Bucket"})]},r))})]}),l&&e.jsx(L,{title:"Create New Bucket",onClose:()=>t(!1),onSubmit:f}),h&&g&&e.jsx(L,{title:"Edit Bucket",initialData:g,onClose:()=>{s(!1),b(null)},onSubmit:(r,u,p,k)=>{B(g.id,{name:r,mock_response:u,mock_headers:p,mock_status_code:k})}})]})}function L({title:i,initialData:n,onClose:c,onSubmit:d}){const[l,t]=o.useState(n?.name||""),[h,s]=o.useState(n?.mock_response?JSON.stringify(n.mock_response,null,2):'{"message": "Success"}'),[g,b]=o.useState((n?.mock_status_code||200).toString()),y=x=>{x.preventDefault();try{const m=JSON.parse(h);d(l,m,{},parseInt(g))}catch{alert("Invalid JSON in mock response")}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[1000] p-5",onClick:c,children:e.jsxs("div",{className:"bg-white rounded-xl max-w-lg w-full shadow-2xl animate-modalSlide",onClick:x=>x.stopPropagation(),children:[e.jsxs("div",{className:"px-6 py-5 border-b border-gray-200 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:i}),e.jsx("button",{onClick:c,className:"w-8 h-8 bg-gray-50 rounded-md text-gray-600 text-2xl flex items-center justify-center transition-all hover:bg-gray-200 hover:text-gray-900",children:"Ã—"})]}),e.jsxs("form",{onSubmit:y,className:"p-6",children:[e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Bucket Name"}),e.jsx("input",{type:"text",value:l,onChange:x=>t(x.target.value),placeholder:"My Webhook Bucket",required:!0,className:"w-full px-3 py-3 border-2 border-gray-200 rounded-lg transition-all outline-none focus:border-purple-600 focus:ring-4 focus:ring-purple-100"})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Mock Response (JSON)"}),e.jsx("textarea",{value:h,onChange:x=>s(x.target.value),rows:6,placeholder:'{"message": "Success"}',required:!0,className:"w-full px-3 py-3 border-2 border-gray-200 rounded-lg font-mono resize-y transition-all outline-none focus:border-purple-600 focus:ring-4 focus:ring-purple-100"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Mock Status Code"}),e.jsx("input",{type:"number",value:g,onChange:x=>b(x.target.value),placeholder:"200",required:!0,className:"w-full px-3 py-3 border-2 border-gray-200 rounded-lg transition-all outline-none focus:border-purple-600 focus:ring-4 focus:ring-purple-100"})]}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{type:"button",onClick:c,className:"px-5 py-2.5 bg-white border-2 border-gray-200 rounded-lg text-gray-700 font-semibold transition-all hover:border-gray-300 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-5 py-2.5 bg-gradient-to-r from-purple-600 to-purple-800 text-white rounded-lg font-semibold transition-all hover:shadow-lg hover:-translate-y-0.5",children:n?"Update Bucket":"Create Bucket"})]})]}),e.jsx("style",{children:`
          @keyframes modalSlide {
            from {
              opacity: 0;
              transform: translateY(-30px);
            }
            to {
              opacity: 1;
              transform: translateY(0);
            }
          }

          .animate-modalSlide {
            animation: modalSlide 0.3s ease-out;
          }
        `})]})})}function J(){const[i,n]=o.useState(null);o.useEffect(()=>{const l=localStorage.getItem("dataBucketUrl"),t=localStorage.getItem("dataBucketUsername"),h=localStorage.getItem("dataBucketPassword");l&&n({url:l,username:t||"",password:h||""})},[]);const c=l=>{n(l)},d=()=>{localStorage.removeItem("dataBucketUrl"),localStorage.removeItem("dataBucketUsername"),localStorage.removeItem("dataBucketPassword"),n(null)};return i?e.jsx(O,{connection:i,onDisconnect:d}):e.jsx(U,{onConnect:c})}export{J as default};
